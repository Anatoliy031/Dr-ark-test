<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>С днём рождения, Сергей Валентинович!</title>

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#050812;
    --grad1:#0e1a45;
    --grad2:#09102b;
    --card:#0a1230e6;
    --line:#22337a;
    --txt:#eaf6ff;
    --muted:#bfe4ff;
    --accent:#7dd3fc;
    --gold:#ffd166;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--grad1),var(--grad2));color:var(--txt)}
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}

  /* Слои эффектов */
  #fw-front{position:fixed;inset:0;width:100%;height:100%;z-index:5;pointer-events:none;mix-blend-mode:screen;}
  #confetti{position:fixed;inset:0;width:100%;height:100%;z-index:3;pointer-events:none;}
  .glow{position:fixed;inset:-25vmin;z-index:1;pointer-events:none;
    background:
      radial-gradient(55vmin 40vmin at 15% 12%, #1e3a8a33 0 60%, transparent 70%),
      radial-gradient(45vmin 30vmin at 90% 8%, #00b4f033 0 60%, transparent 70%);
    filter:blur(14px);
  }

  /* Контент — полностью мобильный */
  .wrap{position:relative;z-index:6;min-height:100dvh;display:flex;align-items:center;justify-content:center;padding:14px}
  .card{
    width:min(760px,94vw);
    border-radius:22px;
    border:1px solid var(--line);
    background:linear-gradient(180deg,var(--card),#0b1434f2);
    box-shadow:0 22px 60px #000a, inset 0 0 0 1px #ffffff18;
    backdrop-filter:blur(10px);
    padding:14px 14px 18px;
  }

  .head{display:flex;gap:12px;align-items:center;margin-bottom:6px}
  .avatar{flex:0 0 auto;width:72px;height:72px;border-radius:50%;overflow:hidden;position:relative;
    border:2px solid #2c3d86;box-shadow:0 6px 18px #000a,inset 0 0 0 1px #ffffff22;background:#11215a}
  .avatar img{width:100%;height:100%;object-fit:cover;display:block}
  .avatar .fallback{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
    font:800 26px/1 "Montserrat",system-ui;color:#dff6ff77}

  .title{font:800 clamp(22px,7vw,40px)/1.12 "Montserrat",system-ui; margin:0 0 2px;
    text-shadow:0 2px 12px #000a,0 0 24px #44c5ff66}
  .subtitle{font:600 clamp(12px,3.6vw,15px)/1.2 "Inter",system-ui;color:var(--muted)}

  /* Печатающаяся строка */
  .typed{margin:10px 2px 12px;font:800 clamp(17px,5.6vw,22px)/1.35 "Inter",system-ui;color:var(--gold);min-height:1.7em}
  .caret{display:inline-block;width:1ch;border-right:2px solid var(--gold);animation:blink 1s steps(1,end) infinite}
  @keyframes blink{50%{border-color:transparent}}

  .text{font:400 clamp(15px,4.4vw,18px)/1.65 "Inter",system-ui;margin:0 2px 10px}
  .sign{margin-top:8px;color:var(--accent);font:800 clamp(15px,4.8vw,19px)/1 "Inter",system-ui}

  /* Адаптивные отступы */
  @media (min-width:560px){ .card{padding:16px 16px 20px} }

  /* Уважение к пользователю */
  @media (prefers-reduced-motion:reduce){
    #fw-front,#confetti{display:none}
    .caret{display:none}
  }
</style>
</head>
<body>
  <!-- Эффекты -->
  <canvas id="fw-front"></canvas>
  <canvas id="confetti"></canvas>
  <div class="glow" aria-hidden="true"></div>

  <!-- Контент -->
  <main class="wrap">
    <section class="card" role="article" aria-label="Поздравление">
      <header class="head">
        <div class="avatar">
          <!-- Скрипт ниже сам подберёт существующее имя файла -->
          <img id="photo" alt="Сергей Валентинович">
          <div class="fallback">СВ</div>
        </div>
        <div>
          <h1 class="title">С днём рождения, Сергей&nbsp;Валентинович!</h1>
          <div class="subtitle">Анатолий и Ирина — с лучами добра и огоньком настроения</div>
        </div>
      </header>

      <div class="typed"><span id="typedText"></span><span class="caret"></span></div>

      <p class="text">
        Желаем мощного здоровья, лёгких побед и ровного огня в делах. Пусть банька всегда в тонусе,
        мангал — без дыма в глаза, а выходные — сплошные «вау-момents».
      </p>
      <p class="text">
        Пусть новый год жизни качает как любимый трек: громко, чисто и на повторе. Больше смеха, вкусных встреч
        и поводов для гордости!
      </p>

      <p class="sign">С теплом — Анатолий и Ирина</p>
    </section>
  </main>

<script>
/* ====== Фото: умная подгрузка (пробуем разные имена) ====== */
(function loadPhoto(){
  const img = document.getElementById('photo');
  const candidates = ["./sergey.jpg","./sergey.JPG","./sergey.jpeg","sergey.jpg","sergey.JPG","sergey.jpeg"];
  let i = 0;
  function tryNext(){
    if(i >= candidates.length){ return; }
    img.onerror = () => { i++; tryNext(); };
    img.src = candidates[i] + "?v=" + Date.now(); // анти-кэш
  }
  tryNext();
})();

/* ====== Фейерверки (передний слой, blend: screen) ====== */
(function fireworks(){
  const c = document.getElementById('fw-front');
  const ctx = c.getContext('2d');
  function fit(){
    const dpr = Math.max(1, Math.min(2, devicePixelRatio||1));
    c.width = Math.floor(innerWidth*dpr); c.height = Math.floor(innerHeight*dpr);
    c.style.width = innerWidth+'px'; c.style.height = innerHeight+'px';
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  fit(); addEventListener('resize', fit, {passive:true});

  let W = () => c.clientWidth, H = () => c.clientHeight;
  const rockets = [], parts = [];
  const G=.12, FR=.985;

  function spawnRocket(){
    const x = Math.random()*W()*0.8 + W()*0.1;
    const y = H()+10;
    const vx = (Math.random()-.5)*1.2;
    const vy = -(Math.random()*3 + 6);
    const hue = (Math.random()*360)|0;
    const peak = Math.random()*H()*.4 + H()*.25;
    rockets.push({x,y,vx,vy,hue,peak});
  }
  function burst(x,y,hue){
    const n=120;
    for(let i=0;i<n;i++){
      const a = i/n*Math.PI*2 + Math.random()*.12;
      const s = Math.random()*3.5 + 1.6;
      parts.push({x,y,vx:Math.cos(a)*s,vy:Math.sin(a)*s,life:60+Math.random()*60,age:0,h:hue+(Math.random()*28-14),r:.8+Math.random()*1.7});
    }
  }
  let last = performance.now();
  function loop(now){
    const dt = Math.max(.5, Math.min(1.5, (now-last)/16.67)); last = now;

    // лёгкое затухание, чтобы были шлейфы, но без «мигания»
    ctx.fillStyle = "rgba(5,8,18,0.20)";
    ctx.fillRect(0,0,W(),H());

    if(rockets.length<3 && Math.random()<.07) spawnRocket();
    for(let i=rockets.length-1;i>=0;i--){
      const r=rockets[i];
      r.x += r.vx*dt; r.y += r.vy*dt; r.vy += G*.35*dt;

      // яркий трассер
      ctx.beginPath(); ctx.moveTo(r.x,r.y); ctx.lineTo(r.x-r.vx*3, r.y-r.vy*3);
      ctx.strokeStyle = `hsl(${r.hue},100%,75%)`; ctx.lineWidth = 1.6; ctx.stroke();

      if(r.y<=r.peak || r.vy>=0){ burst(r.x,r.y,r.hue); rockets.splice(i,1); }
    }

    for(let i=parts.length-1;i>=0;i--){
      const p=parts[i]; p.age+=dt; p.x+=p.vx*dt; p.y+=p.vy*dt; p.vx*=Math.pow(FR,dt); p.vy*=Math.pow(FR,dt); p.vy+=G*dt;
      const a = 1 - p.age/p.life; if(a<=0){ parts.splice(i,1); continue; }
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,6.283); ctx.fillStyle = `hsla(${p.h},100%,65%,${a})`; ctx.fill();
    }
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();

/* ====== Конфетти (под салютом, но над фоном) ====== */
(function confetti(){
  const c = document.getElementById('confetti'); const ctx = c.getContext('2d');
  function fit(){
    const dpr=Math.max(1,Math.min(2,devicePixelRatio||1));
    c.width=Math.floor(innerWidth*dpr); c.height=Math.floor(innerHeight*dpr);
    c.style.width=innerWidth+'px'; c.style.height=innerHeight+'px'; ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  fit(); addEventListener('resize',fit,{passive:true});
  let W=()=>c.clientWidth,H=()=>c.clientHeight;

  const COLORS=['#ffd166','#7dd3fc','#a7f3d0','#fca5a5','#c7d2fe','#fde68a','#f9a8d4'];
  const pieces=[];
  function burst(n=80){const cx=Math.random()*W()*.6+W()*.2, cy=H()*.2+Math.random()*H()*.2;
    for(let i=0;i<n;i++){const a=Math.random()*6.283, s=Math.random()*4+2;
      pieces.push({x:cx,y:cy,vx:Math.cos(a)*s,vy:Math.sin(a)*s*.6,g:.08+Math.random()*.08,w:6+Math.random()*6,h:10+Math.random()*10,rot:Math.random()*6.283,vr:(Math.random()-.5)*.2,c:COLORS[(Math.random()*COLORS.length)|0],life:160+(Math.random()*80|0),age:0});}}
  setInterval(()=>burst(80+(Math.random()*40|0)),3200+(Math.random()*900|0));
  setTimeout(()=>burst(120),600);

  let last=performance.now();
  function loop(now){
    const dt=Math.max(.5,Math.min(1.5,(now-last)/16.67)); last=now;
    ctx.clearRect(0,0,W(),H());
    for(let i=pieces.length-1;i>=0;i--){
      const p=pieces[i]; p.age+=dt; p.x+=p.vx*dt; p.y+=p.vy*dt; p.vy+=p.g*dt; p.rot+=p.vr*dt;
      const flip=Math.cos(p.rot);
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot);
      ctx.globalAlpha=.9*(1-p.age/p.life)*(0.7+Math.abs(flip)*0.3); ctx.fillStyle=p.c;
      ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h); ctx.restore();
      if(p.age>=p.life||p.y>H()+40) pieces.splice(i,1);
    }
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();

/* ====== Печатается → пауза → стирается ====== */
(function typer(){
  const node = document.getElementById('typedText');
  const phrases = [
    "Сегодня ты — главный по жару и настроению! 🔥",
    "В баньке — +100°, в делах — +200% к результату 💪",
    "Планы — как шампур: только сочные куски!",
    "Пусть выходные — сплошные «вау-момents» 😎"
  ];
  const typeMs = 42, eraseMs = 26, holdAfterType = 1100, holdAfterErase = 380;
  let i=0, idx=0, typing=true;

  function tick(){
    const full = phrases[i];
    if(typing){
      idx++; node.textContent = full.slice(0, idx);
      if(idx >= full.length){ typing=false; setTimeout(tick, holdAfterType); return; }
      setTimeout(tick, typeMs);
    }else{
      idx--; node.textContent = full.slice(0, idx);
      if(idx <= 0){ typing=true; i=(i+1)%phrases.length; setTimeout(tick, holdAfterErase); return; }
      setTimeout(tick, eraseMs);
    }
  }
  tick();
})();
</script>
</body>
</html>
