<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>С Днём рождения, Сергей Валентинович!</title>
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Montserrat:wght@800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#0a0f2b; --bg2:#111b42; --glass:#0b102a99; --accent:#6ee7ff; --gold:#ffd166; --white:#f7fbff;
  }
  html,body{height:100%;margin:0;background:radial-gradient(1200px 800px at 70% -10%,#1b2a6b 0%,#0a0f2b 55%) fixed;}
  *{box-sizing:border-box}
  /* Canvas слой с фейерверками и конфетти */
  #fx, #confetti{
    position:fixed; inset:0; width:100%; height:100%; pointer-events:none; z-index:0;
  }
  /* Лёгкая "небесная" дымка поверх фона, под карточкой */
  .glow{
    position:fixed; inset:-20vmin; background:
      radial-gradient(60vmin 40vmin at 20% 15%, #1e3a8a33 0 60%, transparent 70%),
      radial-gradient(40vmin 30vmin at 85% 10%, #00b4f033 0 60%, transparent 70%);
    filter: blur(10px); z-index:1; pointer-events:none;
  }
  /* Контейнер поздравления */
  .wrap{
    position:relative; z-index:2; min-height:100%; display:flex; align-items:center; justify-content:center; padding:16px;
  }
  .card{
    width:min(720px, 94vw);
    background:linear-gradient(180deg, #0b132eAA, #0b132ecc);
    backdrop-filter: blur(8px);
    border:1px solid #1f2a57;
    border-radius:24px;
    padding:20px 18px 22px;
    color:var(--white);
    box-shadow:
      0 20px 60px #0009,
      inset 0 0 0 1px #ffffff12;
  }
  /* Мобильная типографика */
  .title{
    font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    font-size: clamp(22px, 6vw, 40px);
    line-height:1.12; margin:4px 2px 10px; letter-spacing:.3px;
    text-shadow: 0 2px 12px #000A, 0 0 24px #46c3ff66;
  }
  .subtitle{
    font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    font-weight:600; font-size: clamp(14px, 3.8vw, 18px);
    color:#bfe9ff; margin:0 2px 14px;
  }
  .text{
    font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    font-size: clamp(15px, 4.2vw, 18px);
    line-height:1.6; color:#e9f5ff; margin:0 2px 14px;
  }
  .sign{
    margin-top:8px; font-weight:600; color:var(--gold);
    font-size: clamp(15px, 4.5vw, 19px);
  }
  .chips{
    display:flex; flex-wrap:wrap; gap:8px; margin:10px 0 2px;
  }
  .chip{
    font-family:"Inter",system-ui; font-weight:600;
    padding:8px 12px; border-radius:999px; border:1px solid #2a3b80;
    background:linear-gradient(180deg,#0e1a45cc,#0a1333cc);
    color:#dff6ff; font-size: clamp(12px, 3.5vw, 14px);
    box-shadow: 0 6px 16px #0008, inset 0 0 0 1px #ffffff12;
  }
  /* Мягкая анимация появления */
  .fade-in{opacity:0; transform:translateY(10px); animation:fade .9s ease-out .1s forwards}
  .fade-in2{opacity:0; transform:translateY(8px); animation:fade .9s ease-out .25s forwards}
  .fade-in3{opacity:0; transform:translateY(6px); animation:fade .9s ease-out .4s forwards}
  @keyframes fade{to{opacity:1; transform:none}}

  /* Бегущие искорки поверх карточки */
  .sparks{
    position:absolute; inset:0; pointer-events:none; overflow:hidden; border-radius:inherit;
    mask-image: radial-gradient(100% 100% at 50% 50%, #000 60%, transparent 85%);
  }
  .spark{position:absolute; width:2px; height:2px; background:#fff; filter:drop-shadow(0 0 6px #91f2ff); opacity:.9; border-radius:50%;}
  /* Уважение к настройкам пользователя */
  @media (prefers-reduced-motion: reduce){
    #fx,#confetti,.sparks{display:none}
    .fade-in,.fade-in2,.fade-in3{animation:none; opacity:1; transform:none}
  }
</style>
</head>
<body>
  <canvas id="fx"></canvas>
  <canvas id="confetti"></canvas>
  <div class="glow" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card">
      <h1 class="title fade-in">С Днём рождения, Сергей&nbsp;Валентинович!</h1>
      <p class="subtitle fade-in2">Тёплые поздравления от Анатолия и Ирины</p>

      <p class="text fade-in3">
        Дорогой Сергей Валентинович, с праздником!<br>
        Пусть жизнь искрится радостью, планы сбываются легко, а здоровье будет крепким, как дуб.
        Мы очень ценим нашу дружбу и те душевные встречи, когда <b>банька парит</b>, мангал шепчет,
        а у Юли — <i>целая поляна</i> фирменных салатов! Спасибо за ваше гостеприимство и тепло —
        у вас всегда как дома.
      </p>

      <p class="text fade-in3">
        Желаем громких побед, надёжных людей рядом, семейного уюта и чтобы каждый день давал новые поводы
        для улыбок. Пусть жизнь будет как идеальный шашлычок: сочная, с огоньком и только «на отлично»!
      </p>

      <div class="chips fade-in3" aria-hidden="true">
        <span class="chip">Здоровья и сил</span>
        <span class="chip">Радости и уюта</span>
        <span class="chip">Тёплых встреч</span>
        <span class="chip">Счастья семье</span>
      </div>

      <p class="sign fade-in3">С любовью и уважением, Анатолий и Ирина</p>

      <!-- Искорки поверх карточки -->
      <div class="sparks" id="sparks"></div>
    </div>
  </div>

<script>
/* ---------- Утилиты ---------- */
const clamp=(n,min,max)=>Math.max(min,Math.min(max,n));

/* ---------- Retina Canvas настройка ---------- */
function fitCanvas(c){
  const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  const {clientWidth:w, clientHeight:h} = c.parentElement || document.body;
  c.width = Math.floor(w * dpr);
  c.height = Math.floor(h * dpr);
  c.style.width = w + 'px';
  c.style.height = h + 'px';
  const ctx = c.getContext('2d');
  ctx.setTransform(dpr,0,0,dpr,0,0);
  return {ctx, dpr};
}

/* ---------- ФЕЙЕРВЕРКИ ---------- */
(() => {
  const canvas = document.getElementById('fx');
  let {ctx} = fitCanvas(canvas);

  let W = canvas.clientWidth, H = canvas.clientHeight;
  const rockets = [], particles = [];
  const GRAVITY = 0.12, FRICTION = 0.985;

  function resetSize(){
    ({ctx} = fitCanvas(canvas));
    W = canvas.clientWidth; H = canvas.clientHeight;
  }
  window.addEventListener('resize', resetSize, {passive:true});

  function spawnRocket(){
    const x = Math.random()*W*0.8 + W*0.1;
    const y = H + 8;
    const speed = -(Math.random()*3 + 6);
    const vx = (Math.random()-0.5)*1.2;
    const color = Math.floor(Math.random()*360);
    rockets.push({x,y,vx,vy:speed,color,t:0,peak:Math.random()*H*0.4 + H*0.25});
  }
  function burst(x,y,hue){
    const count = 120;
    for(let i=0;i<count;i++){
      const angle = (i/count)*Math.PI*2 + Math.random()*0.12;
      const speed = Math.random()*3.5 + 1.5;
      particles.push({
        x,y,
        vx: Math.cos(angle)*speed,
        vy: Math.sin(angle)*speed,
        life: Math.random()*60+40,
        age:0,
        hue: hue + (Math.random()*30-15),
        size: Math.random()*1.8 + 0.6
      });
    }
  }
  let last = performance.now();
  function tick(now){
    const dt = clamp((now - last)/16.67, 0.5, 1.5);
    last = now;
    ctx.clearRect(0,0,W,H);

    // Шлейф от взрывов
    ctx.fillStyle = "rgba(10,15,30,0.25)";
    ctx.fillRect(0,0,W,H);

    // Рокеты
    if(rockets.length < 3 && Math.random() < 0.06) spawnRocket();
    for(let i=rockets.length-1;i>=0;i--){
      const r = rockets[i];
      r.t += dt;
      r.x += r.vx*dt;
      r.y += r.vy*dt;
      r.vy += GRAVITY*0.35*dt;

      // трассер
      ctx.beginPath();
      ctx.moveTo(r.x, r.y);
      ctx.lineTo(r.x - r.vx*3, r.y - r.vy*3);
      ctx.strokeStyle = `hsl(${r.color},100%,70%)`;
      ctx.lineWidth = 1.5;
      ctx.stroke();

      if(r.y <= r.peak || r.vy >= 0){
        burst(r.x,r.y,r.color);
        rockets.splice(i,1);
      }
    }

    // Частицы взрыва
    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.age += dt;
      p.x += p.vx*dt;
      p.y += p.vy*dt;
      p.vx *= Math.pow(FRICTION, dt);
      p.vy *= Math.pow(FRICTION, dt);
      p.vy += GRAVITY*dt;

      const alpha = 1 - p.age/p.life;
      if(alpha <= 0){ particles.splice(i,1); continue; }
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
      ctx.fillStyle = `hsla(${p.hue},100%,65%,${alpha})`;
      ctx.fill();
    }
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
})();

/* ---------- КОНФЕТТИ ---------- */
(() => {
  const canvas = document.getElementById('confetti');
  let {ctx} = fitCanvas(canvas);
  let W = canvas.clientWidth, H = canvas.clientHeight;

  function resetSize(){
    ({ctx} = fitCanvas(canvas));
    W = canvas.clientWidth; H = canvas.clientHeight;
  }
  window.addEventListener('resize', resetSize, {passive:true});

  const pieces = [];
  const COLORS = [
    '#ffd166','#6ee7ff','#a7f3d0','#fca5a5','#c7d2fe','#fde68a','#f9a8d4'
  ];
  function spawnConfettiBurst(count=90){
    const cx = Math.random()*W*0.6 + W*0.2;
    const cy = H*0.15 + Math.random()*H*0.2;
    for(let i=0;i<count;i++){
      const ang = Math.random()*Math.PI*2;
      const spd = Math.random()*4 + 2;
      pieces.push({
        x:cx,y:cy,
        vx:Math.cos(ang)*spd, vy:Math.sin(ang)*spd*0.6,
        g: 0.08 + Math.random()*0.08,
        w: 6 + Math.random()*6,
        h: 10 + Math.random()*10,
        rot: Math.random()*Math.PI*2,
        vr: (Math.random()-0.5)*0.2,
        color: COLORS[(Math.random()*COLORS.length)|0],
        life: 180 + (Math.random()*80|0),
        age:0
      });
    }
  }
  // Пульс конфетти каждые 2.8–4.2 сек
  setInterval(()=>spawnConfettiBurst(80+ (Math.random()*40|0)), 3200 + (Math.random()*800|0));
  // Стартовый мягкий «залп»
  setTimeout(()=>spawnConfettiBurst(120), 700);

  let last = performance.now();
  function loop(now){
    const dt = clamp((now - last)/16.67, 0.5, 1.5);
    last = now;

    ctx.clearRect(0,0,W,H);
    for(let i=pieces.length-1;i>=0;i--){
      const p = pieces[i];
      p.age += dt;
      p.x += p.vx*dt;
      p.y += p.vy*dt;
      p.vy += p.g*dt;
      p.rot += p.vr*dt;

      // Парящие перевороты (эффект мерцания)
      const flip = Math.cos(p.rot);
      ctx.save();
      ctx.translate(p.x,p.y);
      ctx.rotate(p.rot);
      ctx.globalAlpha = 0.9 * (1 - p.age/p.life) * (0.7 + Math.abs(flip)*0.3);
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
      ctx.restore();

      if(p.age >= p.life || p.y > H+40) pieces.splice(i,1);
    }
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();

/* ---------- Искорки на карточке (лёгкие, без мерцания экрана) ---------- */
(() => {
  const box = document.getElementById('sparks');
  const N = 24;
  for(let i=0;i<N;i++){
    const s = document.createElement('div');
    s.className = 'spark';
    const x = Math.random()*96+2, y = Math.random()*96+2;
    s.style.left = x+'%'; s.style.top = y+'%';
    const dur = 6 + Math.random()*6;
    const dx = (Math.random()*2-1)*8;
    const dy = (Math.random()*2-1)*8;
    s.animate([
      { transform:`translate(0,0)`, opacity: .9 },
      { transform:`translate(${dx}px,${dy}px)`, opacity: .3 }
    ], { duration: dur*1000, direction:'alternate', iterations: Infinity, easing:'ease-in-out' });
    box.appendChild(s);
  }
})();
</script>
</body>
</html>
